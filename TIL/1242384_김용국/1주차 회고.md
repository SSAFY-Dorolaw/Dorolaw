# 서비스 방향성 찾기

AI 기능이 주가 되면 내가 가져갈것이 없어진다. 어떻게 활용할 것인지 생각해봤다.

* 변호사 상담 서비스 : 가장 best 인듯
  * 필요성
    * 사용자 : 영상 업로드만 하면 상담이 쉽게 리포트를 제공해주고, 부족한 내용이 있다면 요구한다.
    * 변호사 : 리포트를 참고하여 손쉽게 상담이 가능하다.
  * 문제점 
    * 변호사 인증 어떻게 함?
    * 실시간 채팅 및 화상회의 필요할듯
    * SSE 알람기능 필요할듯
    * 결제 서비스 넣어도 될까?

* 퀴즈
  * 안전 운전 캠페인 용도
  * 솔직히 너무 대학생스러워서 별로다

* 데이터 허브 (유사 사례)
  * 필요성
    * 사용자 : 내 과실 비율이 맞는지 실제 사례를 통해 확인하고 싶다.
    * 변호사 : 실제 사례를 통해 내가 판단한 과실 비율이 맞는지 확인해보고 싶다.
  * 문제점
    * 비슷한 사례를 어떻게 학습시키지?



# 아키텍처

* Try
  * AI를 고려한 비동기 논블로킹 아키텍처 구성
* Problem
  * 실시간 채팅 서비스, 알람서비스가 추가되었다. 변경이 필요하다.

![아키텍처1](.\md-images\아키텍처1.png)

# ERD

* Try
  * 서비스 방향이 어떻게 될지 몰라서 ERCloud를 구성해서 협업 환경만 구성



# API 

AI 기능이 좀 늦어질것 같다. 공통 기능을 일단 빠르게 처리해서 AI 서포트를 하자.

1. 회원관리 (로그인, 로그아웃, 회원가입)

   * Try
     * Spring Boot + Spring Security + JWT + local caching + RDB

   * Problem
     * 로컬 cache vs redis : 확장성을 고려할까 아니면 지금 현재상황을 고려할까?
     * 캐시 만료시간 + 최대 데이터 개수
     * DB 선택 : 어떤 db를 사용할까?
     * DB Connection Pool 개수

2. 결제 서비스 (단건 결제) : 변호사 상담 예약에 사용

   * Try
     * 카카오페이 연동
   * Problem
     * 크레딧 제도를 도입할까? : 변호사가 너무 불편할것 같다
     * 카카오페이로 직접 송금 : 수수료 받는 구조로 가고 싶은데 어떻게 해야 되지?

3. 실시간 채팅

   * Try
     * WebSocket 구현
   * Problem
     * 대화 내역을 어떤 db에 저장할까?
     * 들어오기 전 대화내역이 안보임
     * 멀티 채팅방을 고려해서 최적화가 필요

4. 예약 알람

   * Try
     * SSE 방식의 알람
     * 카카오 알람
     * 변호사 상담 알람함에 추가
   * Problem
     * 메세지 큐 선택 : RabbitMQ or Kafka 선택
     * FCM 써볼까?



